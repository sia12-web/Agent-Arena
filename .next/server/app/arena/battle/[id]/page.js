(()=>{var a={};a.id=641,a.ids=[641],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:a=>{"use strict";a.exports=require("querystring")},11805:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i});var d=c(75338),e=c(82161),f=c(99611),g=c(83905),h=c(47684);async function i({params:a}){let{id:b}=await a,c=await (0,f.DD)(b),i=c?await (0,g.rY)(b):null;c||(0,e.redirect)("/arena");let j={logic:"Logic Challenge",debate:"Debate Challenge",creativity:"Creativity Challenge"},k=`${c.agent.name} scored ${c.scoreTotal} on ${j[c.challengeType]}!`;return(0,d.jsx)(h.default,{battle:c,defaultTitle:k,existingPost:i,challengeNames:j})}},12412:a=>{"use strict";a.exports=require("assert")},16641:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["arena",{children:["battle",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,11805)),"C:\\Users\\shahb\\myApplications\\Agent Arena\\app\\arena\\battle\\[id]\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(c.bind(c,25694)),"C:\\Users\\shahb\\myApplications\\Agent Arena\\app\\arena\\battle\\[id]\\loading.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"C:\\Users\\shahb\\myApplications\\Agent Arena\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["C:\\Users\\shahb\\myApplications\\Agent Arena\\app\\arena\\battle\\[id]\\page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/arena/battle/[id]/page",pathname:"/arena/battle/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/arena/battle/[id]/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22483:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"00f891a334bc7670ac7fc574b2cf1a5263096cad7c":()=>d.WD,"4029e1dfc7b507935da2d760b1f443812e257e66df":()=>e.tY,"404a6c2b1e978bddade6acb8b2ed443f13273be068":()=>d.dx,"408a2ee8528575b735a74e1103de7a4a025a0216b7":()=>e.rY,"409e3d952a16dc36fccd1daa57ec5ce35565f97427":()=>d.DD,"602306e2e9ba633e6296a575bfacdf7b3bdb63fdef":()=>e.Wz,"605c7e10122fbe4de60e78b8e48c156a9215daefc6":()=>e.dx,"60cedcd5a474a12ad3f1252d76e6ff85385c262e5b":()=>e.Gi,"707f959a73799a95c14ec5352161da459a5439970a":()=>d.cF});var d=c(99611),e=c(83905)},25694:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f});var d=c(75338),e=c(77774);function f(){return(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-slate-950",children:(0,d.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-3xl",children:[(0,d.jsxs)("div",{className:"text-center mb-8",children:[(0,d.jsx)(e.EA,{className:"w-16 h-16 mx-auto mb-4 rounded-full"}),(0,d.jsx)(e.EA,{className:"h-8 w-48 mx-auto mb-2"}),(0,d.jsx)(e.EA,{className:"h-4 w-64 mx-auto"})]}),(0,d.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-8 mb-6",children:[(0,d.jsxs)("div",{className:"text-center mb-6",children:[(0,d.jsx)(e.EA,{className:"w-32 h-16 mx-auto mb-2"}),(0,d.jsx)(e.EA,{className:"h-4 w-24 mx-auto"})]}),(0,d.jsxs)("div",{className:"border-t border-slate-700 pt-6",children:[(0,d.jsx)(e.EA,{className:"h-5 w-40 mb-4"}),(0,d.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((a,b)=>(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)(e.EA,{className:"h-4 w-32"}),(0,d.jsx)(e.EA,{className:"h-4 w-12"})]},b))})]})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,d.jsx)(e.EA,{className:"h-4 w-40 mb-3"}),(0,d.jsx)(e.EA,{className:"h-20 w-full"})]}),(0,d.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,d.jsx)(e.EA,{className:"h-4 w-40 mb-3"}),(0,d.jsx)(e.EA,{className:"h-32 w-full"})]})]})]})})}},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},40190:(a,b,c)=>{"use strict";c.d(b,{Eb:()=>e,U5:()=>f,cr:()=>g});let d=new Map;async function e(a,b,c){let e=Date.now(),f=d.get(a);return!f||e>f.resetAt?(d.set(a,{count:1,resetAt:e+c}),{allowed:!0}):f.count>=b?{allowed:!1,retryAt:f.resetAt}:(f.count++,{allowed:!0})}function f(a){let b=function(a){let b=Math.ceil((a-Date.now())/1e3);if(b<60)return`${b} seconds`;let c=Math.ceil(b/60);return`${c} minutes`}(a);return{error:`You're doing that too fast. Try again in ${b}.`}}let g={login:{limit:10,window:6e4},battleSubmit:{limit:10,window:6e4},postPublish:{limit:10,window:36e5},vote:{limit:60,window:6e4},comment:{limit:20,window:6e4},follow:{limit:30,window:6e4}}},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},47684:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\shahb\\\\myApplications\\\\Agent Arena\\\\app\\\\arena\\\\battle\\\\[id]\\\\battle-result-client.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\shahb\\myApplications\\Agent Arena\\app\\arena\\battle\\[id]\\battle-result-client.tsx","default")},54461:(a,b,c)=>{Promise.resolve().then(c.bind(c,47684))},55161:(a,b,c)=>{"use strict";c.d(b,{default:()=>l});var d=c(21124),e=c(3991),f=c.n(e),g=c(38301),h=c(42378);function i({isOpen:a,onClose:b,onShare:c,defaultTitle:e,agentName:f,score:h,challengeType:i}){let[j,k]=(0,g.useState)(e),[l,m]=(0,g.useState)(!1),[n,o]=(0,g.useState)("");if(!a)return null;let p=async()=>{if(!j.trim())return void o("Title cannot be empty");m(!0),o("");try{await c(j.trim()),b()}catch(a){o(a.message||"Failed to share post")}finally{m(!1)}},q={logic:"Logic Challenge",debate:"Debate Challenge",creativity:"Creativity Challenge"};return(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-lg w-full",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Share to Feed"}),(0,d.jsx)("p",{className:"text-slate-400 mb-6",children:"Share your battle result to the public feed. You can customize the title before posting."}),(0,d.jsx)("div",{className:"bg-slate-900/50 rounded-lg p-4 mb-6",children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-sm text-slate-400",children:"Agent"}),(0,d.jsx)("div",{className:"font-semibold",children:f})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("span",{className:"text-sm text-slate-400",children:"Score"}),(0,d.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:h})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("span",{className:"text-sm text-slate-400",children:"Challenge"}),(0,d.jsx)("div",{className:"capitalize",children:q[i]||i})]})]})}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Post Title"}),(0,d.jsx)("input",{id:"title",type:"text",value:j,onChange:a=>k(a.target.value),maxLength:200,className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a title for your post"}),(0,d.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[j.length,"/200 characters"]})]}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-slate-400 mb-2",children:"Preview"}),(0,d.jsxs)("div",{className:"bg-slate-900/30 rounded-lg p-4 border border-slate-700",children:[(0,d.jsx)("div",{className:"font-semibold mb-1",children:j||"Your post title"}),(0,d.jsxs)("p",{className:"text-sm text-slate-400",children:[f," scored ",h," on ",q[i]||i,"!"]})]})]}),n&&(0,d.jsx)("div",{className:"bg-red-900/30 border border-red-700 text-red-300 px-4 py-3 rounded-lg mb-4",children:n}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsx)("button",{onClick:b,disabled:l,className:"flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 text-white font-semibold rounded-lg transition-colors",children:"Cancel"}),(0,d.jsx)("button",{onClick:p,disabled:l,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 text-white font-semibold rounded-lg transition-colors",children:l?"Sharing...":"Share to Feed"})]})]})})}var j=c(85708);let k=(0,j.createServerReference)("60cedcd5a474a12ad3f1252d76e6ff85385c262e5b",j.callServer,void 0,j.findSourceMapURL,"createOrUpdatePostForBattle");function l({battle:a,defaultTitle:b,existingPost:c,challengeNames:e}){(0,h.useRouter)();let[j,l]=(0,g.useState)(!1),[m,n]=(0,g.useState)(!!c),[o,p]=(0,g.useState)(""),q=async b=>{p("");let c=await k(a.id,b);if("error"in c&&c.error)return void p(c.error);n(!0)};return(0,d.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-slate-950",children:[(0,d.jsx)("header",{className:"border-b border-slate-800 bg-slate-900/50",children:(0,d.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,d.jsx)(f(),{href:"/arena",className:"text-slate-400 hover:text-white",children:"← Back to Arena"})})}),(0,d.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-3xl",children:[(0,d.jsxs)("div",{className:"text-center mb-8",children:[(0,d.jsx)("div",{className:"text-6xl mb-4",children:a.scoreTotal>=80?"\uD83C\uDFC6":a.scoreTotal>=60?"⭐":"\uD83D\uDCDD"}),(0,d.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Battle Complete!"}),(0,d.jsxs)("p",{className:"text-slate-400",children:[a.agent.name," completed a ",e[a.challengeType]]})]}),(0,d.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-8 mb-6",children:[(0,d.jsxs)("div",{className:"text-center mb-6",children:[(0,d.jsx)("div",{className:"text-6xl font-bold text-blue-400 mb-2",children:a.scoreTotal}),(0,d.jsx)("div",{className:"text-slate-400",children:"Total Score"})]}),(0,d.jsxs)("div",{className:"border-t border-slate-700 pt-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Score Breakdown"}),(0,d.jsx)("div",{className:"space-y-3",children:Object.entries(a.scoreBreakdown).map(([a,b])=>(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:"text-slate-300 capitalize",children:a.replace(/_/g," ")}),(0,d.jsxs)("span",{className:`font-semibold ${b>0?"text-green-400":b<0?"text-red-400":"text-slate-400"}`,children:[b>0?"+":"",b]})]},a))})]})]}),(0,d.jsxs)("div",{className:"space-y-6 mb-6",children:[(0,d.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-slate-400 mb-3",children:"Challenge Input"}),(0,d.jsx)("p",{className:"text-slate-200",children:a.inputText})]}),(0,d.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-slate-400 mb-3",children:"Agent Response"}),(0,d.jsx)("p",{className:"text-slate-200 whitespace-pre-wrap",children:a.outputText})]})]}),o&&(0,d.jsx)("div",{className:"bg-red-900/30 border border-red-700 text-red-300 px-4 py-3 rounded-lg mb-6",children:o}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:[(0,d.jsx)("button",{onClick:()=>l(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:m?"Edit Post in Feed":"Share to Feed"}),(0,d.jsx)(f(),{href:"/arena",className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors",children:"Rematch"}),(0,d.jsx)(f(),{href:`/agents/${a.agentId}`,className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition-colors",children:"View Agent"}),m&&(0,d.jsx)(f(),{href:"/feed",className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors",children:"View Feed"})]})]}),(0,d.jsx)(i,{isOpen:j,onClose:()=>l(!1),onShare:q,defaultTitle:b,agentName:a.agent.name,score:a.scoreTotal,challengeType:a.challengeType})]})}},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66077:(a,b,c)=>{Promise.resolve().then(c.bind(c,55161))},74075:a=>{"use strict";a.exports=require("zlib")},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},81630:a=>{"use strict";a.exports=require("http")},83905:(a,b,c)=>{"use strict";c.d(b,{Gi:()=>k,Wz:()=>i,dx:()=>m,rY:()=>l,tY:()=>j});var d=c(75879);c(68633);var e=c(70373),f=c(52963),g=c(66147),h=c(40190);async function i(a=1,b=20){return await e.z.post.findMany({skip:(a-1)*b,take:b,orderBy:{createdAt:"desc"},include:{author:{select:{id:!0,email:!0}},battle:{include:{agent:{select:{id:!0,name:!0,avatar:!0}}}},_count:{select:{comments:!0}}}})}async function j(a){return await e.z.post.findUnique({where:{id:a},include:{author:{select:{id:!0,email:!0}},battle:{include:{agent:!0}},votes:!0,_count:{select:{comments:!0}}}})}async function k(a,b){let c=await (0,f.getServerSession)(g.N);if(!c?.user?.id)return{error:"Unauthorized"};let d=await e.z.post.findUnique({where:{battleId:a}});if(!d){let a=await (0,h.Eb)(`postPublish:${c.user.id}`,h.cr.postPublish.limit,h.cr.postPublish.window);if(!a.allowed)return(0,h.U5)(a.retryAt)}let i=await e.z.battle.findUnique({where:{id:a},include:{agent:!0}});if(!i)return{error:"Battle not found"};if(i.agent.userId!==c.user.id)return{error:"You can only share your own battles"};let j=b||`${i.agent.name} scored ${i.scoreTotal} on ${({logic:"Logic Challenge",debate:"Debate Challenge",creativity:"Creativity Challenge"})[i.challengeType]}!`,k=`My agent completed a ${i.challengeType} challenge and scored ${i.scoreTotal} points!`;return{success:!0,post:d?await e.z.post.update({where:{id:d.id},data:{title:j}}):await e.z.post.create({data:{battleId:a,authorUserId:c.user.id,title:j,body:k}})}}async function l(a){return await e.z.post.findUnique({where:{battleId:a}})}async function m(a,b=5){return await e.z.post.findMany({where:{battle:{agentId:a}},include:{battle:{include:{agent:{select:{id:!0,name:!0,avatar:!0}}}},_count:{select:{comments:!0}}},orderBy:{createdAt:"desc"},take:b})}(0,c(51669).D)([i,j,k,l,m]),(0,d.A)(i,"602306e2e9ba633e6296a575bfacdf7b3bdb63fdef",null),(0,d.A)(j,"4029e1dfc7b507935da2d760b1f443812e257e66df",null),(0,d.A)(k,"60cedcd5a474a12ad3f1252d76e6ff85385c262e5b",null),(0,d.A)(l,"408a2ee8528575b735a74e1103de7a4a025a0216b7",null),(0,d.A)(m,"605c7e10122fbe4de60e78b8e48c156a9215daefc6",null)},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},94735:a=>{"use strict";a.exports=require("events")},96330:a=>{"use strict";a.exports=require("@prisma/client")},99611:(a,b,c)=>{"use strict";c.d(b,{dx:()=>m,cF:()=>p,DD:()=>o,WD:()=>n});var d=c(75879);c(68633);var e=c(52963),f=c(66147),g=c(70373),h=c(45711);let i=h.Ik({agentId:h.Yj().min(1,"Agent is required"),challengeType:h.k5(["logic","debate","creativity"],{required_error:"Challenge type is required"}),inputText:h.Yj().min(10,"Challenge input must be at least 10 characters").max(2e3,"Input must be 2000 characters or less"),outputText:h.Yj().optional()}),j=["hate","kill","violence","terrorist","nazi","hitler","racist","slur","discrimination","harassment"];function k(a){let b=a.toLowerCase();return j.some(a=>b.includes(a))}var l=c(40190);async function m(a){let b=await (0,e.getServerSession)(f.N);if(!b?.user?.id)return{error:"Unauthorized"};let c=await (0,l.Eb)(`battleSubmit:${b.user.id}`,l.cr.battleSubmit.limit,l.cr.battleSubmit.window);if(!c.allowed)return(0,l.U5)(c.retryAt);let d=i.safeParse(a);if(!d.success)return{error:"Invalid input",fields:d.error.flatten()};let h=await g.z.agent.findUnique({where:{id:a.agentId}});if(!h||h.userId!==b.user.id)return{error:"Agent not found or unauthorized"};let{scoreTotal:j,scoreBreakdown:m}=function(a,b,c){if(k(b)||k(c))return{scoreTotal:0,scoreBreakdown:{blocked_content:-100}};switch(a){case"logic":let d={base:40},e=40;/answer:/i.test(c)&&(d.answer_bonus=10,e+=10),/^[\s]*(•|-|\d+\.)/m.test(c)&&(d.structure_bonus=10,e+=10);let f=c.length;return f>=80&&f<=600&&(d.length_bonus=10,e+=10),Object.values(c.split("\n").map(a=>a.trim()).filter(a=>a).reduce((a,b)=>(a[b]=(a[b]||0)+1,a),{})).some(a=>a>=3)&&(d.spam_penalty=-10,e-=10),d.civility=k(c)?-100:0,{scoreTotal:Math.max(0,e+=d.civility),scoreBreakdown:d};case"debate":let g={base:40},h=40;return/claim:/i.test(c)&&(g.claim_bonus=10,h+=10),/however|on the other hand/i.test(c)&&(g.counterargument_bonus=10,h+=10),/example:/i.test(c)&&(g.example_bonus=10,h+=10),k(c)&&(g.keyword_penalty=-20,h-=20),{scoreTotal:Math.max(0,h),scoreBreakdown:g};case"creativity":return function(a,b){let c={base:40},d=40,e=b.length;b.split("\n").filter(a=>a.trim()),/^title:\s|^\#\s/im.test(b)&&(c.title_bonus=10,d+=10),(b.match(/part \d+|chapter \d+|##+/gi)||[]).length>=3&&(c.section_bonus=10,d+=10);let f=b.trim().split(/\s+/),g=new Set(f.map(a=>a.toLowerCase()));return f.length>0&&g.size/f.length>=.5&&(c.variety_bonus=10,d+=10),e<80&&(c.too_short_penalty=-10,d-=10),c.civility=k(b)?-100:0,{scoreTotal:Math.max(0,d+=c.civility),scoreBreakdown:c}}(0,c);default:return{scoreTotal:0,scoreBreakdown:{error:-100}}}}(a.challengeType,a.inputText,a.outputText);if(0===j&&m.blocked_content)return{error:"Content blocked. Please ensure your input is appropriate."};let n=await g.z.battle.create({data:{agentId:a.agentId,challengeType:a.challengeType,inputText:a.inputText,outputText:a.outputText,scoreTotal:j,scoreBreakdown:JSON.stringify(m)}}),o=Math.round(h.rating+(j-50)/10);return await g.z.agent.update({where:{id:a.agentId},data:{rating:Math.max(100,o)}}),{success:!0,battle:n,scoreTotal:j,scoreBreakdown:m}}async function n(){let a=await (0,e.getServerSession)(f.N);return a?.user?.id?await g.z.agent.findMany({where:{userId:a.user.id},orderBy:{createdAt:"desc"}}):[]}async function o(a){let b=await g.z.battle.findUnique({where:{id:a},include:{agent:!0}});return b?{...b,scoreBreakdown:JSON.parse(b.scoreBreakdown)}:null}async function p(a,b,c){let d={logic:[`To solve this problem, I'll approach it step by step:

1. First, let me understand the given information.
2. Next, I'll analyze the relationships.
3. Finally, I'll reach a conclusion.

Answer: Based on the logical analysis, the conclusion is clear.`,`Step 1: Identify the key elements.
Step 2: Analyze the logical structure.
Step 3: Draw a conclusion.

Therefore, the answer is derived from valid reasoning.`],debate:[`Claim: ${b.substring(0,50)}...

Reason: The evidence supports this position because of fundamental principles and practical considerations.

Example: In practice, we see this approach leading to better outcomes.

However, I acknowledge that opponents might argue... but I believe the stronger case is for my position.`,`My position on this topic is based on several key arguments:

1. First, there are practical considerations.
2. Second, ethical principles support this view.
3. Third, real-world examples demonstrate validity.

While others may disagree, I believe the preponderance of evidence favors this stance.`],creativity:[`Once upon a time, in a world not unlike our own, something extraordinary happened. The characters in our story discovered that creativity and imagination could change reality itself.

As the story unfolds, we see how courage and innovation triumph over adversity. The journey leads to unexpected revelations and meaningful transformations.

In the end, the true power of human spirit shines through.`,`In the vast tapestry of existence, there are moments that define who we are. This is one such moment.

The adventure begins with a simple discovery, but soon blossoms into an epic journey of self-discovery and wonder. Along the way, challenges are met with creativity, and obstacles become opportunities.

The conclusion reminds us that within every challenge lies the seed of growth.`]}[a];return d[Math.floor(Math.random()*d.length)]}(0,c(51669).D)([m,n,o,p]),(0,d.A)(m,"404a6c2b1e978bddade6acb8b2ed443f13273be068",null),(0,d.A)(n,"00f891a334bc7670ac7fc574b2cf1a5263096cad7c",null),(0,d.A)(o,"409e3d952a16dc36fccd1daa57ec5ce35565f97427",null),(0,d.A)(p,"707f959a73799a95c14ec5352161da459a5439970a",null)}};var b=require("../../../../webpack-runtime.js");b.C(a);var c=b.X(0,[139,765,991,601,73,689],()=>b(b.s=16641));module.exports=c})();