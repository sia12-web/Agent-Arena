(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[641],{63:(e,t,s)=>{"use strict";var a=s(7260);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},926:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{callServer:function(){return a.callServer},createServerReference:function(){return r.createServerReference},findSourceMapURL:function(){return l.findSourceMapURL}});let a=s(1209),l=s(5153),r=s(7197)},2907:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var a=s(5155),l=s(2619),r=s.n(l),n=s(2115),c=s(63);function d(e){let{isOpen:t,onClose:s,onShare:l,defaultTitle:r,agentName:c,score:d,challengeType:i}=e,[o,x]=(0,n.useState)(r),[m,h]=(0,n.useState)(!1),[b,u]=(0,n.useState)("");if(!t)return null;let p=async()=>{if(!o.trim())return void u("Title cannot be empty");h(!0),u("");try{await l(o.trim()),s()}catch(e){u(e.message||"Failed to share post")}finally{h(!1)}},g={logic:"Logic Challenge",debate:"Debate Challenge",creativity:"Creativity Challenge"};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-slate-800 border border-slate-700 rounded-xl p-6 max-w-lg w-full",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Share to Feed"}),(0,a.jsx)("p",{className:"text-slate-400 mb-6",children:"Share your battle result to the public feed. You can customize the title before posting."}),(0,a.jsx)("div",{className:"bg-slate-900/50 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"Agent"}),(0,a.jsx)("div",{className:"font-semibold",children:c})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"Score"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:d})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"text-sm text-slate-400",children:"Challenge"}),(0,a.jsx)("div",{className:"capitalize",children:g[i]||i})]})]})}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Post Title"}),(0,a.jsx)("input",{id:"title",type:"text",value:o,onChange:e=>x(e.target.value),maxLength:200,className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a title for your post"}),(0,a.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[o.length,"/200 characters"]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-slate-400 mb-2",children:"Preview"}),(0,a.jsxs)("div",{className:"bg-slate-900/30 rounded-lg p-4 border border-slate-700",children:[(0,a.jsx)("div",{className:"font-semibold mb-1",children:o||"Your post title"}),(0,a.jsxs)("p",{className:"text-sm text-slate-400",children:[c," scored ",d," on ",g[i]||i,"!"]})]})]}),b&&(0,a.jsx)("div",{className:"bg-red-900/30 border border-red-700 text-red-300 px-4 py-3 rounded-lg mb-4",children:b}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:s,disabled:m,className:"flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 text-white font-semibold rounded-lg transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:p,disabled:m,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 text-white font-semibold rounded-lg transition-colors",children:m?"Sharing...":"Share to Feed"})]})]})})}var i=s(926);let o=(0,i.createServerReference)("60cedcd5a474a12ad3f1252d76e6ff85385c262e5b",i.callServer,void 0,i.findSourceMapURL,"createOrUpdatePostForBattle");function x(e){let{battle:t,defaultTitle:s,existingPost:l,challengeNames:i}=e;(0,c.useRouter)();let[x,m]=(0,n.useState)(!1),[h,b]=(0,n.useState)(!!l),[u,p]=(0,n.useState)(""),g=async e=>{p("");let s=await o(t.id,e);if("error"in s&&s.error)return void p(s.error);b(!0)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-slate-950",children:[(0,a.jsx)("header",{className:"border-b border-slate-800 bg-slate-900/50",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsx)(r(),{href:"/arena",className:"text-slate-400 hover:text-white",children:"← Back to Arena"})})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-3xl",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:t.scoreTotal>=80?"\uD83C\uDFC6":t.scoreTotal>=60?"⭐":"\uD83D\uDCDD"}),(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Battle Complete!"}),(0,a.jsxs)("p",{className:"text-slate-400",children:[t.agent.name," completed a ",i[t.challengeType]]})]}),(0,a.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-8 mb-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"text-6xl font-bold text-blue-400 mb-2",children:t.scoreTotal}),(0,a.jsx)("div",{className:"text-slate-400",children:"Total Score"})]}),(0,a.jsxs)("div",{className:"border-t border-slate-700 pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Score Breakdown"}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(t.scoreBreakdown).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-slate-300 capitalize",children:t.replace(/_/g," ")}),(0,a.jsxs)("span",{className:"font-semibold ".concat(s>0?"text-green-400":s<0?"text-red-400":"text-slate-400"),children:[s>0?"+":"",s]})]},t)})})]})]}),(0,a.jsxs)("div",{className:"space-y-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-slate-400 mb-3",children:"Challenge Input"}),(0,a.jsx)("p",{className:"text-slate-200",children:t.inputText})]}),(0,a.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-slate-400 mb-3",children:"Agent Response"}),(0,a.jsx)("p",{className:"text-slate-200 whitespace-pre-wrap",children:t.outputText})]})]}),u&&(0,a.jsx)("div",{className:"bg-red-900/30 border border-red-700 text-red-300 px-4 py-3 rounded-lg mb-6",children:u}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:[(0,a.jsx)("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:h?"Edit Post in Feed":"Share to Feed"}),(0,a.jsx)(r(),{href:"/arena",className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors",children:"Rematch"}),(0,a.jsx)(r(),{href:"/agents/".concat(t.agentId),className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition-colors",children:"View Agent"}),h&&(0,a.jsx)(r(),{href:"/feed",className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors",children:"View Feed"})]})]}),(0,a.jsx)(d,{isOpen:x,onClose:()=>m(!1),onShare:g,defaultTitle:s,agentName:t.agent.name,score:t.scoreTotal,challengeType:t.challengeType})]})}},5880:(e,t,s)=>{Promise.resolve().then(s.bind(s,2907))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=5880)),_N_E=e.O()}]);