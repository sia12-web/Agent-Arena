(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}});let s=r(1209),n=r(5153),l=r(7197)},1505:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var s=r(5155),n=r(2619),l=r.n(n);let a={card:"bg-slate-800/50 border border-slate-700 rounded-xl p-8 text-center",inline:"text-center py-8",section:"bg-slate-800/50 border border-slate-700 rounded-xl p-12 text-center"};function i(e){let{icon:t,title:r,description:n,actionLabel:i,actionHref:c,variant:d="card"}=e;return(0,s.jsxs)("div",{className:a[d],children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:t}),(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2",children:r}),(0,s.jsx)("p",{className:"text-slate-400 mb-4",children:n}),i&&c&&(0,s.jsx)(l(),{href:c,className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:i})]})}},2252:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(5155),n=r(2115),l=r(926);let a=(0,l.createServerReference)("60b67144d80f3800a671c0dbb2ea301d9e3ca109dd",l.callServer,void 0,l.findSourceMapURL,"createComment"),i=(0,l.createServerReference)("40f4c6051833dbcafb62367f45e89af202033f7975",l.callServer,void 0,l.findSourceMapURL,"deleteComment");var c=r(1505);function d(e){let{postId:t,comments:r,session:l}=e,[d,o]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1),[x,b]=(0,n.useState)(""),[f,h]=(0,n.useState)(r);async function v(e){if(e.preventDefault(),b(""),!l)return void b("Please sign in to comment");if(d.trim().length<1)return void b("Comment cannot be empty");m(!0);let r=await a(t,d);if("error"in r&&r.error){b(r.error),m(!1);return}o(""),m(!1),"comment"in r&&r.comment&&h([...f,r.comment])}async function p(e){if(!confirm("Are you sure you want to delete this comment?"))return;let t=await i(e);if("error"in t&&t.error)return void b(t.error);h(f.filter(t=>t.id!==e))}return(0,s.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-xl p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Comments (",f.length,")"]}),l?(0,s.jsxs)("form",{onSubmit:v,className:"mb-6",children:[(0,s.jsx)("textarea",{value:d,onChange:e=>o(e.target.value),placeholder:"Write a comment...",rows:3,maxLength:1e3,className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"}),x&&(0,s.jsx)("p",{className:"text-red-400 text-sm mt-2",children:x}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,s.jsxs)("span",{className:"text-xs text-slate-500",children:[d.length,"/1000"]}),(0,s.jsx)("button",{type:"submit",disabled:u||d.trim().length<1,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-700 text-white font-medium rounded-lg transition-colors",children:u?"Posting...":"Post Comment"})]})]}):(0,s.jsxs)("div",{className:"mb-6 p-4 bg-slate-900/30 rounded-lg text-center",children:[(0,s.jsx)("p",{className:"text-slate-400 mb-2",children:"Sign in to join the discussion"}),(0,s.jsx)("a",{href:"/login",className:"text-blue-400 hover:text-blue-300",children:"Sign In →"})]}),0===f.length?(0,s.jsx)(c.p,{icon:"\uD83D\uDCAC",title:"No comments yet",description:"Be the first to share your thoughts!",variant:"inline"}):(0,s.jsx)("div",{className:"space-y-4",children:f.map(e=>{var t;return(0,s.jsxs)("div",{className:"border-l-2 border-slate-700 pl-4 py-2",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-slate-700 rounded-full flex items-center justify-center",children:e.user.email[0].toUpperCase()}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:e.user.email}),(0,s.jsx)("div",{className:"text-xs text-slate-500",children:new Date(e.createdAt).toLocaleString()})]})]}),(null==l||null==(t=l.user)?void 0:t.id)===e.userId&&(0,s.jsx)("button",{onClick:()=>p(e.id),className:"text-xs text-red-400 hover:text-red-300",children:"Delete"})]}),(0,s.jsx)("p",{className:"text-slate-300",children:e.body})]},e.id)})})]})}},4773:(e,t,r)=>{Promise.resolve().then(r.bind(r,2252)),Promise.resolve().then(r.bind(r,7359)),Promise.resolve().then(r.t.bind(r,2619,23))},7359:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(5155),n=r(2115),l=r(926);let a=(0,l.createServerReference)("60739d63ed36ef2db6d40556771308c36653553917",l.callServer,void 0,l.findSourceMapURL,"votePost");function i(e){let{postId:t,userVote:r,upvotesCount:l,downvotesCount:i}=e,[c,d]=(0,n.useState)(r),[o,u]=(0,n.useState)(!1);async function m(e){if(o)return;u(!0);let r=await a(t,e);"success"in r&&r.success&&("removed"in r&&r.removed||c===e?d(null):d(e)),u(!1)}return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>m(1),disabled:o,className:"flex items-center gap-1 px-3 py-1 rounded-lg transition-all ".concat(1===c?"bg-green-900/50 text-green-300 border border-green-700":"bg-slate-700/50 text-slate-400 border border-slate-600 hover:bg-slate-700"),children:[(0,s.jsx)("span",{children:"↑"}),(0,s.jsx)("span",{children:(null!=l?l:0)+ +(1===c)})]}),(0,s.jsxs)("button",{onClick:()=>m(-1),disabled:o,className:"flex items-center gap-1 px-3 py-1 rounded-lg transition-all ".concat(-1===c?"bg-red-900/50 text-red-300 border border-red-700":"bg-slate-700/50 text-slate-400 border border-slate-600 hover:bg-slate-700"),children:[(0,s.jsx)("span",{children:"↓"}),(0,s.jsx)("span",{children:(null!=i?i:0)+ +(-1===c)})]})]})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=4773)),_N_E=e.O()}]);